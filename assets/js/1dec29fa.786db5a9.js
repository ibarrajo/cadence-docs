"use strict";(self.webpackChunkcadence=self.webpackChunkcadence||[]).push([[9612],{3209:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"workflow-troubleshooting/timeouts","title":"Timeouts","description":"A workflow could fail if an activity times out and will timeout when the entire workflow execution times out. Workflows or activities time out when their time to execute or time to start has been longer than their configured timeout. Some of the common causes for timeouts have been listed here.","source":"@site/docs/08-workflow-troubleshooting/01-timeouts.md","sourceDirName":"08-workflow-troubleshooting","slug":"/workflow-troubleshooting/timeouts","permalink":"/Cadence-Docs/docs/workflow-troubleshooting/timeouts","draft":false,"unlisted":false,"editUrl":"https://github.com/cadence-workflow/Cadence-Docs/tree/master/docs/08-workflow-troubleshooting/01-timeouts.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"layout":"default","title":"Timeouts","permalink":"/docs/workflow-troubleshooting/timeouts"},"sidebar":"docsSidebar","previous":{"title":"Overview","permalink":"/Cadence-Docs/docs/workflow-troubleshooting/"},"next":{"title":"Activity Failures","permalink":"/Cadence-Docs/docs/workflow-troubleshooting/activity-failures"}}');var n=o(4848),r=o(8453);const s={layout:"default",title:"Timeouts",permalink:"/docs/workflow-troubleshooting/timeouts"},a="Timeouts",l={},c=[{value:"Missing Pollers",id:"missing-pollers",level:2},{value:"Tasklist backlog despite having pollers",id:"tasklist-backlog-despite-having-pollers",level:2},{value:"Timeouts without heartbeating enabled",id:"timeouts-without-heartbeating-enabled",level:2},{value:"Heartbeat Timeouts after enabling heartbeating",id:"heartbeat-timeouts-after-enabling-heartbeating",level:2}];function h(e){const t={a:"a",h1:"h1",h2:"h2",header:"header",p:"p",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"timeouts",children:"Timeouts"})}),"\n",(0,n.jsx)(t.p,{children:"A workflow could fail if an activity times out and will timeout when the entire workflow execution times out. Workflows or activities time out when their time to execute or time to start has been longer than their configured timeout. Some of the common causes for timeouts have been listed here."}),"\n",(0,n.jsx)(t.h2,{id:"missing-pollers",children:"Missing Pollers"}),"\n",(0,n.jsx)(t.p,{children:"Cadence workers are part of the service that hosts and executes the workflow. They are of two types: activity worker and workflow worker. Each of these workers are responsible for having pollers which are go-routines that poll for activity tasks and decision tasks respectively from the Cadence server. Without pollers, the workflow cannot proceed with the execution."}),"\n",(0,n.jsx)(t.p,{children:"Mitigation: Make sure these workers are configured with the task lists that are used in the workflow and activities so the server can dispatch tasks to the cadence workers."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://github.com/cadence-workflow/cadence-samples/blob/master/cmd/samples/pageflow/main.go#L18",children:"Worker setup example"})}),"\n",(0,n.jsx)(t.h2,{id:"tasklist-backlog-despite-having-pollers",children:"Tasklist backlog despite having pollers"}),"\n",(0,n.jsx)(t.p,{children:"If a tasklist has pollers but the backlog continues to grow then it is a supply-demand issue. The workflow is growing faster than what the workers can handle. The server wants to dispatch more tasks to the workers but they are not able to keep up."}),"\n",(0,n.jsx)(t.p,{children:"Mitigation: Increase the number of cadence workers by horizontally scaling up the instances where the workflow is running."}),"\n",(0,n.jsx)(t.p,{children:"Optionally you can also increase the number of pollers per worker by providing this via worker options."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://pkg.go.dev/go.uber.org/cadence@v1.2.9/internal#WorkerOptions",children:"Link to options in go client"}),"\n",(0,n.jsx)(t.a,{href:"https://github.com/cadence-workflow/cadence-java-client/blob/master/src/main/java/com/uber/cadence/internal/worker/PollerOptions.java#L124",children:"Link to options in java client"})]}),"\n",(0,n.jsx)(t.h2,{id:"timeouts-without-heartbeating-enabled",children:"Timeouts without heartbeating enabled"}),"\n",(0,n.jsx)(t.p,{children:"Activities time out StartToClose or ScheduleToClose if the activity took longer than the configured timeout."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://cadenceworkflow.io/docs/concepts/activities/#timeouts",children:"Link to description of timeouts"})}),"\n",(0,n.jsx)(t.p,{children:"For long running activities, while the activity is executing, the worker can die due to regular deployments or host restarts or failures. Cadence doesn't know about this and will wait for  StartToClose or ScheduleToClose timeouts to kick in."}),"\n",(0,n.jsx)(t.p,{children:"Mitigation: Consider enabling heartbeating"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://github.com/cadence-workflow/cadence-samples/blob/df6f7bdba978d6565ad78e9f86d9cd31dfac9f78/cmd/samples/expense/workflow.go#L23",children:"Configuring heartbeat timeout example"})}),"\n",(0,n.jsx)(t.p,{children:"For short running activities, heart beating is not required but maybe consider increasing the timeout value to suit the actual activity execution time."}),"\n",(0,n.jsx)(t.h2,{id:"heartbeat-timeouts-after-enabling-heartbeating",children:"Heartbeat Timeouts after enabling heartbeating"}),"\n",(0,n.jsx)(t.p,{children:"Activity has enabled heart beating but the activity timed out with heart beat timeout. This is because the server did not receive a heart beat in the time interval configured as the heart beat timeout."}),"\n",(0,n.jsx)(t.p,{children:"Mitigation: Once heartbeat timeout is configured in activity options, you need to make sure the activity periodically sends a heart beat to the server to make sure the server is aware of the activity being alive."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://github.com/cadence-workflow/cadence-samples/blob/df6f7bdba978d6565ad78e9f86d9cd31dfac9f78/cmd/samples/fileprocessing/activities.go#L111",children:"Example to send periodic heart beat"})}),"\n",(0,n.jsx)(t.p,{children:"In go client, there is an option to register the activity with auto heart beating so that it is done automatically"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://pkg.go.dev/go.uber.org/cadence@v1.2.9/internal#WorkerOptions",children:"Enabling auto heart beat during activity registration example"})})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>a});var i=o(6540);const n={},r=i.createContext(n);function s(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);